<form
  class="flex flex-col gap-2 p-2"
  [formGroup]="registerForm"
  (ngSubmit)="onSubmit()"
>
  <h3 class="text-2xl font-bold mx-1">Register</h3>
  <p class="text-xs mx-1 mb-2">
    Do you already have an account?
    <a routerLink="/auth/login" class="font-bold">Login here</a>
  </p>
  <div class="flex justify-between gap-x-24">
    <div class="flex flex-col gap-y-4">
      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="flex items-center gap-x-2">
          <svg
            class="h-[1em] opacity-50"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2.5"
              fill="none"
              stroke="currentColor"
            >
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </g>
          </svg>
          <input type="text" placeholder="Name" formControlName="name" />
        </div>
      </label>
      @if(formUtils.validField(registerForm, 'name')) {
      <span class="text-red-500 text-xs">{{
        formUtils.getFieldError(registerForm, "name")
      }}</span>
      }
      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="flex items-center gap-x-2">
          <svg
            class="h-[1em] opacity-50"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2.5"
              fill="none"
              stroke="currentColor"
            >
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </g>
          </svg>
          <input
            type="text"
            placeholder="Last Name"
            formControlName="lastName"
          />
        </div>
      </label>
      @if(registerForm.controls['lastName'].errors?.['required'] &&
      registerForm.controls['lastName'].touched) {
      <span class="text-red-500 text-xs">*Field required*</span>
      }
      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="flex items-center gap-x-2">
          <svg
            class="h-[1em] opacity-50"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2.5"
              fill="none"
              stroke="currentColor"
            >
              <rect width="20" height="16" x="2" y="4" rx="2"></rect>
              <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
            </g>
          </svg>
          <input type="email" placeholder="Email" formControlName="email" />
        </div>
      </label>
      @if(registerForm.controls['email'].errors?.['required'] &&
      registerForm.controls['email'].touched) {
      <span class="text-red-500 text-xs">*Field required*</span>
      } @if(registerForm.controls['email'].errors?.['email'] &&
      registerForm.controls['email'].touched) {
      <span class="text-red-500 text-xs">*Invalid email*</span>
      }
      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="flex items-center gap-x-2">
          <svg
            class="h-[1em] opacity-50"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2.5"
              fill="none"
              stroke="currentColor"
            >
              <path
                d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"
              ></path>
              <circle cx="16.5" cy="7.5" r=".5" fill="currentColor"></circle>
            </g>
          </svg>
          <input
            type="password"
            placeholder="Password"
            formControlName="password"
          />
        </div>
      </label>
      @if(registerForm.controls['password'].errors?.['required'] &&
      registerForm.controls['password'].touched) {
      <span class="text-red-500 text-xs">*Field required*</span>
      }
      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="flex items-center gap-x-2">
          <svg
            class="h-[1em] opacity-50"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <g
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2.5"
              fill="none"
              stroke="currentColor"
            >
              <path
                d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"
              ></path>
              <circle cx="16.5" cy="7.5" r=".5" fill="currentColor"></circle>
            </g>
          </svg>
          <input
            type="password"
            placeholder="Confirm Password"
            formControlName="confirmPassword"
          />
        </div>
      </label>
      @if(registerForm.controls['confirmPassword'].errors?.['required'] &&
      registerForm.controls['confirmPassword'].touched) {
      <span class="text-red-500 text-xs">*Field required*</span>
      }
    </div>

    <!-- Add subject -->
    <div class="my-2">
      <h2>Subjects</h2>
      <ul class="flex flex-col my-4 gap-y-2">
        @for (subject of registerForm.controls['subjects'].value; track $index)
        {
        <li>
          <span class="text-white font-bold">{{ subject }}</span>
        </li>
        }
      </ul>

      <label style="outline: none; border: none" class="input bg-black/50 py-6">
        <div class="input-group">
          <input
            [formControl]="subjectForm"
            (keydown.enter)="onAddSubject()"
            (keydown.enter)="$event.stopPropagation()"
            type="text"
            placeholder="New subject"
          />

          <button
            type="button"
            (click)="onAddSubject()"
            class="btn btn-outline-primary"
          >
            Add
          </button>
        </div>
      </label>
    </div>
  </div>

  <button
    type="submit"
    class="btn btn-active hover:btn-primary transition-all duration-500 hover:text-white btn-xs sm:btn-sm md:btn-md lg:btn-lg"
  >
    Register
  </button>

  @if(registerForm.hasError('passwordNotEqual')) {
  <span class="text-red-500 text-xs">*Passwords not match*</span>
  }
</form>
